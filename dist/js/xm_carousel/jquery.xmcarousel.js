"use strict";!function(c){function n(t){var i=t.imgs,s=t.width,e=t.height,n=t.duration,h=t.addPrevNextBtn;this.imgs=i,this.width=s,this.height=e,this.duration=n||3e3,this.addPrevNextBtn=h,this.container=null,this.lis=null,this.circles=null,this.len=i.length,this.currentIndex=0,this.nextIndex=1,this.timer=null,this.prev=null,this.next=null}c.extend(n.prototype,{createDom:function(t){this.container=c(t),this.container.addClass("xm-container");for(var i="",s="",e=0,n=this.imgs.length;e<n;e++)i+="<li "+(0==e?'style="display:block;"':"")+'>\n\t\t\t\t\t\t\t<a href="'+this.imgs[e].href+'">\n\t\t\t\t\t\t\t\t<img src="'+this.imgs[e].src+'">\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>',s+="<i "+(0==e?'class="current"':"")+"></i>";var h="";this.addPrevNextBtn&&(h='<div class="prev">&lt;</div>\n\t\t\t\t\t\t\t<div class="next">&gt;</div>');var r='<ul class="imgs">'+i+'</ul>\n\t\t\t<div class="pages">'+s+"</div>\n\t\t\t"+h;this.container.html(r),this.container.css({width:this.width,height:this.height}),c(".imgs, li",this.container).css({width:this.width,height:this.height}),c(".pages",this.container).css("width",this.width),this.lis=c("li",this.container),this.circles=c("i",this.container),this.prev=c(".prev",this.container),this.next=c(".next",this.container),this.registerEventListener()},autoPlay:function(){this.timer=setInterval(c.proxy(this.move,this),this.duration)},move:function(){this.lis.eq(this.currentIndex).stop().fadeOut(),this.lis.eq(this.nextIndex).stop().fadeIn(),this.circles.eq(this.currentIndex).removeClass("current"),this.circles.eq(this.nextIndex).addClass("current"),this.currentIndex=this.nextIndex,this.nextIndex++,this.nextIndex>=this.len&&(this.nextIndex=0)},registerEventListener:function(){this.container.hover(c.proxy(this.stopPlay,this),c.proxy(this.autoPlay,this)),this.circles.mouseover(c.proxy(this.over,this)),this.prev.on("click",c.proxy(this.previous,this)),this.next.on("click",c.proxy(this.move,this))},stopPlay:function(){clearInterval(this.timer)},over:function(t){var i=c(t.target).index();this.currentIndex!=i&&(this.nextIndex=i,this.move())},previous:function(){console.log("in"),this.nextIndex=this.currentIndex-1,this.nextIndex<0&&(this.nextIndex=this.len-1),this.move()}}),c.fn.carousel=function(e){this.each(function(t,i){var s=new n(e);s.createDom(i),s.autoPlay()})}}(jQuery);