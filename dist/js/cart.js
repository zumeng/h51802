"use strict";$(function(){$.cookie.json=!0;var o=$.cookie("products")||[];if(0!==o.length){var t=template("cart_template",{products:o});$(".tab_cart tbody").html(t),$(".tab_cart").on("click",".del",function(){var t=$(this).parents("tr"),e=i(t.data("id"),o);o.splice(e,1),$.cookie("products",o,{expires:7,path:"/"}),t.remove(),r()}),$(".tab_cart").on("click",".minus,.add",function(){var t=$(this).parents("tr"),e=i(t.data("id"),o),a=o[e];if($(this).is(".add"))a.amount++;else{if(a.amount<=1)return;a.amount--}$.cookie("products",o,{expires:7,path:"/"}),t.find(".amount").val(a.amount),t.find(".sub").text((a.price*a.amount).toFixed(2)),r()}),$(".tab_cart").on("blur",".amount",function(){var t=$(this).parents("tr"),e=i(t.data("id"),o),a=o[e],c=$(this).val();/^[1-9]\d*$/.test(c)?(a.amount=c,$.cookie("products",o,{expires:7,path:"/"}),t.find(".sub").text((a.price*a.amount).toFixed(2)),r()):$(this).val(a.amount)}),$(".ck_all").click(function(){var t=$(this).prop("checked");$(".ck_prod").prop("checked",t),r()}),$(".ck_prod").click(function(){var t=$(".ck_prod:checked").length===o.length;$(".ck_all").prop("checked",t),r()})}function i(t,e){for(var a=0,c=e.length;a<c;a++)if(e[a].id==t)return a;return-1}function r(){var a=0;$(".ck_prod:checked").each(function(t,e){a+=Number($(this).parents("tr").find(".sub").text())}),$(".total_pay").text(a.toFixed(2))}});